{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECT\\\\React final\\\\resume_project_r_3_react-final\\\\src\\\\useComponents\\\\Bookhistory.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { fetchBookingHistoryFromAPI, cancelBooking } from '../services/userSide';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Bookhistory() {\n  _s();\n  const userId = sessionStorage.getItem('userUserId');\n  const [history, sethistory] = useState([]);\n  // const [show,setshow] = useState([]);\n\n  useEffect(() => {\n    fetchBookingHistory(userId);\n  }, []);\n  const fetchBookingHistory = async userId => {\n    try {\n      console.log(userId);\n      const bookingHistory = await fetchBookingHistoryFromAPI(userId);\n      sethistory(bookingHistory);\n    } catch (error) {\n      console.error(\"Error fetching booking history:\", error);\n    }\n  };\n  const handleCancelBooking = async reservationId => {\n    try {\n      await cancelBooking(reservationId);\n      alert(\"BOOKING CANCELED\");\n      fetchBookingHistory(userId); // Refresh booking history after cancellation\n      // Optionally, you can use React Router to navigate to the history page\n      // window.location.href = '/history';\n    } catch (error) {\n      console.error(\"Error canceling booking:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"book-history-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Reservation History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), history.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"reservation-list\",\n      children: [history.map(reservation => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"reservation-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://192.168.0.110:4000/${reservation.images}`,\n          alt: \"Image\",\n          className: \"img-fluid img-thumbnail\",\n          style: {\n            maxHeight: \"100px\",\n            width: \"auto\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Reservation ID: \", reservation.reservation_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Room Number: \", reservation.room_number]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Room Type: \", reservation.room_type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Check-in Date: \", reservation.check_in_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Check-out Date: \", reservation.check_out_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Status: Booked\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleCancelBooking(reservation.reservation_id),\n          children: \"Cancel Reservation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this)]\n      }, reservation.reservation_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this)), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"No reservation history available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(Bookhistory, \"ctH6kBKN93C5h7XWqzV5w/NSWck=\");\n_c = Bookhistory;\nexport default Bookhistory;\nvar _c;\n$RefreshReg$(_c, \"Bookhistory\");","map":{"version":3,"names":["axios","React","useEffect","useState","fetchBookingHistoryFromAPI","cancelBooking","jsxDEV","_jsxDEV","Bookhistory","_s","userId","sessionStorage","getItem","history","sethistory","fetchBookingHistory","console","log","bookingHistory","error","handleCancelBooking","reservationId","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","reservation","src","images","alt","style","maxHeight","width","reservation_id","room_number","room_type","check_in_date","check_out_date","onClick","_c","$RefreshReg$"],"sources":["D:/PROJECT/React final/resume_project_r_3_react-final/src/useComponents/Bookhistory.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react'\nimport {fetchBookingHistoryFromAPI,cancelBooking} from '../services/userSide'\n\nfunction Bookhistory() {\n\n  const userId = sessionStorage.getItem('userUserId');\n  const [history, sethistory] = useState([]);\n  // const [show,setshow] = useState([]);\n\n  useEffect(() => {\n    fetchBookingHistory(userId);\n  }, []);\n\n  const fetchBookingHistory = async (userId) =>\n  {\n    try \n    {\n      console.log(userId);\n      const bookingHistory = await fetchBookingHistoryFromAPI(userId);\n      sethistory(bookingHistory);\n    } \n    catch (error) {\n      console.error(\"Error fetching booking history:\", error);\n    }\n  };\n\n  const handleCancelBooking = async (reservationId) => {\n    try {\n      await cancelBooking(reservationId);\n      alert(\"BOOKING CANCELED\");\n      fetchBookingHistory(userId); // Refresh booking history after cancellation\n      // Optionally, you can use React Router to navigate to the history page\n      // window.location.href = '/history';\n    } catch (error) {\n      console.error(\"Error canceling booking:\", error);\n    }\n  };\n\n  return (\n    <div className=\"book-history-container\">\n      <h2>Your Reservation History</h2>\n      {history.length > 0 ? (\n        <ul className=\"reservation-list\">\n          {history.map((reservation) => (\n            <li key={reservation.reservation_id} className=\"reservation-item\">\n              <img src={`http://192.168.0.110:4000/${reservation.images}`} alt=\"Image\" className=\"img-fluid img-thumbnail\" style={{ maxHeight: \"100px\", width: \"auto\" }} />\n              <p>Reservation ID: {reservation.reservation_id}</p>\n              <p>Room Number: {reservation.room_number}</p>\n              <p>Room Type: {reservation.room_type}</p>\n              <p>Check-in Date: {reservation.check_in_date}</p>\n              <p>Check-out Date: {reservation.check_out_date}</p>\n              <p>Status: Booked</p>\n              <button onClick={() => handleCancelBooking(reservation.reservation_id)}>Cancel Reservation</button>\n            </li>\n          ))}.\n        </ul>\n      ) : (\n        <p><h1>No reservation history available.</h1></p>\n      )}\n    </div>\n  )\n}\n\nexport default Bookhistory\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}