{"ast":null,"code":"var _jsxFileName = \"/home/sunbeam/Downloads/uploade-on-resume-redy-2sep--user_and_admin_integrated_final_react-main (1)/uploade-on-resume-redy-2sep--user_and_admin_integrated_final_react-main/src/useComponents/Bookhistory.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { fetchBookingHistoryFromAPI } from '../services/userSide';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Bookhistory() {\n  _s();\n  const userId = sessionStorage.getItem('userUserId');\n  const [history, sethistory] = useState([]);\n  // const [show,setshow] = useState([]);\n\n  useEffect(() => {\n    fetchBookingHistory(userId);\n  }, []);\n  const fetchBookingHistory = async userId => {\n    try {\n      console.log(userId);\n      const bookingHistory = await fetchBookingHistoryFromAPI(userId);\n      sethistory(bookingHistory);\n    } catch (error) {\n      console.error(\"Error fetching booking history:\", error);\n    }\n  };\n  const handleCancelBooking = async reservationId => {\n    try {\n      await cancelBooking(reservationId);\n      alert(\"BOOKING CANCELED\");\n      fetchBookingHistory(userId); // Refresh booking history after cancellation\n      // Optionally, you can use React Router to navigate to the history page\n      // window.location.href = '/history';\n    } catch (error) {\n      console.error(\"Error canceling booking:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"book-history-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Reservation History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), history.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"reservation-list\",\n      children: [history.map(reservation => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"reservation-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://192.168.0.110:4000/${reservation.images}`,\n          alt: \"Image\",\n          className: \"img-fluid img-thumbnail\",\n          style: {\n            maxHeight: \"100px\",\n            width: \"auto\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Reservation ID: \", reservation.reservation_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Room Number: \", reservation.room_number]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Room Type: \", reservation.room_type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Check-in Date: \", reservation.check_in_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Check-out Date: \", reservation.check_out_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Status: Booked\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleCancelBooking(reservation.reservation_id),\n          children: \"Cancel Reservation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this)]\n      }, reservation.reservation_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this)), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"No reservation history available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 12\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(Bookhistory, \"ctH6kBKN93C5h7XWqzV5w/NSWck=\");\n_c = Bookhistory;\nexport default Bookhistory;\nvar _c;\n$RefreshReg$(_c, \"Bookhistory\");","map":{"version":3,"names":["axios","React","useEffect","useState","fetchBookingHistoryFromAPI","jsxDEV","_jsxDEV","Bookhistory","_s","userId","sessionStorage","getItem","history","sethistory","fetchBookingHistory","console","log","bookingHistory","error","handleCancelBooking","reservationId","cancelBooking","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","reservation","src","images","alt","style","maxHeight","width","reservation_id","room_number","room_type","check_in_date","check_out_date","onClick","_c","$RefreshReg$"],"sources":["/home/sunbeam/Downloads/uploade-on-resume-redy-2sep--user_and_admin_integrated_final_react-main (1)/uploade-on-resume-redy-2sep--user_and_admin_integrated_final_react-main/src/useComponents/Bookhistory.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport {fetchBookingHistoryFromAPI} from '../services/userSide'\r\n\r\nfunction Bookhistory() {\r\n\r\n  const userId = sessionStorage.getItem('userUserId');\r\n  const [history, sethistory] = useState([]);\r\n  // const [show,setshow] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchBookingHistory(userId);\r\n  }, []);\r\n\r\n  const fetchBookingHistory = async (userId) =>\r\n  {\r\n    try \r\n    {\r\n      console.log(userId);\r\n      const bookingHistory = await fetchBookingHistoryFromAPI(userId);\r\n      sethistory(bookingHistory);\r\n    } \r\n    catch (error) {\r\n      console.error(\"Error fetching booking history:\", error);\r\n    }\r\n  };\r\n\r\n  const handleCancelBooking = async (reservationId) => {\r\n    try {\r\n      await cancelBooking(reservationId);\r\n      alert(\"BOOKING CANCELED\");\r\n      fetchBookingHistory(userId); // Refresh booking history after cancellation\r\n      // Optionally, you can use React Router to navigate to the history page\r\n      // window.location.href = '/history';\r\n    } catch (error) {\r\n      console.error(\"Error canceling booking:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"book-history-container\">\r\n      <h2>Your Reservation History</h2>\r\n      {history.length > 0 ? (\r\n        <ul className=\"reservation-list\">\r\n          {history.map((reservation) => (\r\n            <li key={reservation.reservation_id} className=\"reservation-item\">\r\n              <img src={`http://192.168.0.110:4000/${reservation.images}`} alt=\"Image\" className=\"img-fluid img-thumbnail\" style={{ maxHeight: \"100px\", width: \"auto\" }} />\r\n              <p>Reservation ID: {reservation.reservation_id}</p>\r\n              <p>Room Number: {reservation.room_number}</p>\r\n              <p>Room Type: {reservation.room_type}</p>\r\n              <p>Check-in Date: {reservation.check_in_date}</p>\r\n              <p>Check-out Date: {reservation.check_out_date}</p>\r\n              <p>Status: Booked</p>\r\n              <button onClick={() => handleCancelBooking(reservation.reservation_id)}>Cancel Reservation</button>\r\n            </li>\r\n          ))}.\r\n        </ul>\r\n      ) : (\r\n        <p><h1>No reservation history available.</h1></p>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Bookhistory\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}